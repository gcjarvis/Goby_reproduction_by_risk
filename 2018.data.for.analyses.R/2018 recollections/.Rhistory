axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.5))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
png("Output/2019.11.13.bw.6.5x5.5.300dpi.png", width = 6.5, height = 5.5, units = 'in', res = 300)
reco.plot<- ggplot(reco.means, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survival
(gobies recollected per reef)") +
theme(legend.position="none") +
scale_fill_manual(values=c("white", "#666666", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.5))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
#not sure why it's off the x axis now...has something to do with breaks
dev.off()
png("Output/2019.11.13.bw.6.5x5.5.300dpi.png", width = 6.5, height = 5.5, units = 'in', res = 300)
reco.plot<- ggplot(reco.means, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survival
(gobies recollected per reef)") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.5))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
#not sure why it's off the x axis now...has something to do with breaks
dev.off()
source('C:/Users/George/Desktop/2018 summer/2018 Goby/Goby_reproduction_by_risk/2018.data.for.analyses.R/2018 recollections/Scripts/2019.11.13.recollection.figure.for.ms.R')
reco.plot<- ggplot(reco.means, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survival
(gobies recollected per reef)") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.1))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
reco.plot<- ggplot(reco.means, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survival
(gobies recollected per reef)") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.1))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
#load packages
library(ggplot2)
reco.plot<- ggplot(reco.means, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survival
(gobies recollected per reef)") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.1))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
reco.plot<- ggplot(reco.means, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survival
(gobies recollected per reef)") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.1))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
reco.plot<- ggplot(reco.means, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survival
(gobies recollected per reef)") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.5))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
png("Output/2019.11.13.bw.6.5x5.5.300dpi.png", width = 6.5, height = 5.5, units = 'in', res = 300)
reco.plot<- ggplot(reco.means, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survival
(gobies recollected per reef)") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.5))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
#not sure why it's off the x axis now...has something to do with breaks
dev.off()
png("Output/2019.11.13.bw.6.5x5.5.300dpi.png", width = 6.5, height = 5.5, units = 'in', res = 300)
reco.plot<- ggplot(reco.means, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survival
(gobies recollected per reef)") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.1))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
#not sure why it's off the x axis now...has something to do with breaks
dev.off()
library(lme4)
library(car)
library(lmerTest)
library(dplyr)
library(ggplot2)
library(MASS)
library(nlme)
library(pwr)
library(HH)#for ancova and plots
library(vegan)
library(agricolae)#for tukey post-hoc test
#importing dataset, adding number of gobies on each reef, ordering treatments####
#includes a column ("Treatment") where uncaged and HR are coded as "High"
#also includes a column ("T6.comparison") where uncaged and high are separated
reco<-read.csv("Data/2019.10.8.recollection.data.csv", na.strings = "")
reco<-read.csv("Data/2019.10.8.recollection.data.csv")
#mixed model, normal distribution
mod.1<-lmer(Count ~ Treatment + (1|Trial), data=reco)
hist(resid(mod.1))
qqnorm(resid(mod.1))
qqline(resid(mod.1))
anova(mod.1)
#load packages
library(ggplot2)
#read data
reco<-read.csv("Data/2019.10.8.recollection.data.csv", na.strings = "")
reco.means<-with(reco, aggregate((Count), list(Treatment=Treatment), mean))
#changing y-axis to reflect survivorship per reef, instead of raw counts
reco$Survivorship<-reco$count/20
#changing y-axis to reflect survivorship per reef, instead of raw counts
reco$Survivorship<-reco$Count/20
#df for plotting
survival<-with(reco, aggregate((Survivorship), list(Treatment=Treatment), mean))
survival
#ordering treatments
reco.means$Treatment<-ordered(reco.means$Treatment,levels=c("Low","Medium","High"))
#ordering treatments
reco$Treatment<-ordered(reco$Treatment,levels=c("Low","Medium","High"))
#df for plotting
survival<-with(reco, aggregate((Survivorship), list(Treatment=Treatment), mean))
survival$se<-with(reco, aggregate((Survivorship), list(Treatment=Treatment), function(x) sd(x)/sqrt(length(x))))[,2]
png("Output/2019.11.17.survivorship.6.5x5.5.300dpi.png", width = 6.5, height = 5.5, units = 'in', res = 300)
reco.plot<- ggplot(survival, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survivorship") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.1))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
dev.off()
reco.plot<- ggplot(survival, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survivorship") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,6.1))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
reco.plot<- ggplot(survival, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survivorship") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,0.35))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
reco.plot<- ggplot(survival, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survivorship") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,0.31))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
png("Output/2019.11.17.survivorship.6.5x5.5.300dpi.png", width = 6.5, height = 5.5, units = 'in', res = 300)
reco.plot<- ggplot(survival, aes(x=Treatment, y=x, fill=Treatment)) +
geom_bar(stat="identity", colour= "black", width = 0.5, position="dodge")+
scale_x_discrete(limits=c("Low","Medium","High"))+
theme_classic() +
labs(x="Risk Treatment", y="Survivorship") +
theme(legend.position="none") +
scale_fill_manual(values=c("grey", "grey", "grey")) +
theme(axis.text.x=element_text(size=20, colour="black"),
axis.text.y=element_text(size=20, colour="black"),
axis.title=element_text(size=20))+
theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 12, r = 0, b = 0, l = 0)),
axis.text.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0))) +
theme(legend.text=element_text(size=18)) +
theme(legend.title =element_text(size=20))+
theme(axis.ticks.x = element_blank()) + scale_y_continuous(expand = c(0,0),limits = c(0,0.31))
reco.plot + geom_linerange(aes(ymin=x-se, ymax=x+se), size=0.5,
position=position_dodge(.85)) + theme(text = element_text(family="Arial"))
dev.off()
library(lme4)
library(sciplot)
library(lme4)
library(car)
library(lmerTest)
library(dplyr)
library(ggplot2)
library(MASS)
library(nlme)
library(pwr)
library(HH)#for ancova and plots
library(vegan)
library(agricolae)#for tukey post-hoc test
#same model, but now with survivorship, instead of raw counts
mod.1s<-lmer(Survivorship ~ Treatment + (1|Trial), data=reco)
hist(resid(mod.1s))
qqnorm(resid(mod.1s))
qqline(resid(mod.1s))
anova(mod.1s)
Anova(mod.1s)
rm(list=ls())
library(sciplot)
library(lme4)
library(lmerTest)
library(dplyr)
library(ggplot2)
library(car)
library(MASS)
library(nlme)
#read data
reco<-read.csv("Data/2019.10.8.recollection.data.csv", na.strings = "")
reco<-read.csv("Data/2019.10.8.recollection.data.csv")
reco<-na.omit(reco)
#adding column for survivorship, dividing counts by 20 (initial number of fish on reefs)
reco$Survivorship<-ceiling(reco$Count/20)
#adding column for survivorship, dividing counts by 20 (initial number of fish on reefs)
reco$Survivorship<-reco$Count/20
#already have a column for year, going to make it a factor now
reco$Year.fact<- as.factor(reco$Year)
#using raw counts, including year, and trial nested within year, year as numeric
mod1<-lmer(Count~Treatment*Year.fact+(1|Year.fact:Trial), data=reco)
hist(resid(mod1))
qnorm(resid(mod1))
qqline(resid(mod1))
hist(resid(mod1))
qnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1, type = "III")
Anova(mod1)
summary(mod1) #none of it is sig. can reduce model? also want to make sure I get the same result when year is run as factor
reco<-na.omit(reco)
#using raw counts, including year, and trial nested within year, year as numeric
mod1<-lmer(Count~Treatment*Year.fact+(1|Year.fact:Trial), data=reco)
hist(resid(mod1))
qnorm(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1, type = "III")
anova(mod1)
Anova(mod1)
summary(mod1) #none of it is sig. can reduce model? also want to make sure I get the same result when year is run as factor
ranef(mod1)
#using proportional data for survival
mod2<-lmer(Survivorship~Treatment*Year.fact+(1|Year.fact:Trial), data=reco)
hist(resid(mod2))
qqnorm(resid(mod2))
qqline(resid(mod2))
anova(mod2)
anova(mod2)
Anova(mod2)
summary(mod2) #no differences in either categorical factor, or interaction
#plotting####
#ordering treatments
reco$Treatment.ord<-ordered(reco$Treatment, levels=c("Low","Medium","High"))
reco$T6.comparison.ord<-ordered(reco$T6.comparison, levels=c("Low","Medium","High","Uncaged"))
bargraph.CI(x.factor = Treatment.ord, response = Count,
group= Year.fact, legend=TRUE, main="Recollection by treatment and year",
data = reco, ylab="Gobies Recollected")
bargraph.CI(x.factor = Treatment.ord, response = Survivorship,
group= Year.fact, legend=TRUE, main="Survivorship by treatment and year",
data = reco, ylab="Survivorship")
#using proportional data for survival
mod2<-lmer(Survivorship~Treatment*Year.fact+(1|Year.fact:Trial), data=reco)
hist(resid(mod2))
qqnorm(resid(mod2))
qqline(resid(mod2))
anova(mod2)
Anova(mod2)
anova(mod1)
Anova(mod1)
#using raw counts, including year, and trial nested within year, year as numeric
mod1<-lmer(Count~Treatment*Year.fact+(1|Year.fact:Trial), data=reco)
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
#using proportional data for survival
mod2<-lmer(Survivorship~Treatment*Year.fact+(1|Year.fact:Trial), data=reco)
hist(resid(mod2))
qqnorm(resid(mod2))
qqline(resid(mod2))
anova(mod2)
Anova(mod2)
bargraph.CI(x.factor = Treatment.ord, response = Survivorship,
main="Survivorship by treatment and year",
data = reco, ylab="Survivorship")
#no year factor
bargraph.CI(x.factor = Treatment.ord, response = Survivorship,
main="Survivorship by treatment",
data = reco, ylab="Survivorship")
bargraph.CI(x.factor = Treatment.ord, response = Count,
main="Recollection by treatment",
data = reco, ylab="Gobies Recollected")
library(nlme)
options(contrasts = c("contr.sum","contr.poly")) #this is important, run before ANOVA, will set SS to type III
#read data
reco<-read.csv("Data/2019.10.8.recollection.data.csv")
reco<-na.omit(reco)
#adding column for survivorship, dividing counts by
#- 20 (initial number of fish on reefs)
reco$Survivorship<-reco$Count/20
#already have a column for year, going to make it a factor now
reco$Year.fact<- as.factor(reco$Year)
#using nlme package to model recollections
mod2.2.luk<-lme(Survivorship~Treatment*Year.fact,random=~1|Trial,reco,method="REML")
summary(mod2.2.luk)
anova(mod2.2.luk, type='marginal')
hist(resid(mod2.2.luk))
qqnorm(resid(mod2.2.luk))
qqline(resid(mod2.2.luk))
summary(mod2.2.luk)
anova(mod2.2.luk, type='marginal')
#arithmetic means for comparison and ss
library(FSA)
Summarize(Survivorship~Treatment,
data=reco,
digits=3)
library(sciplot)
library(lme4)
library(car)
library(lmerTest)
library(dplyr)
library(lmerTest)
library(dplyr)
library(ggplot2)
library(MASS)
library(nlme)
options(contrasts = c("contr.sum","contr.poly")) #this is important, run before ANOVA, will set SS to type III
#read data
reco<-read.csv("Data/2019.10.8.recollection.data.csv")
reco<-na.omit(reco)
#adding column for survivorship, dividing counts by
#- 20 (initial number of fish on reefs)
reco$Survivorship<-reco$Count/20
#already have a column for year, going to make it a factor now
reco$Year.fact<- as.factor(reco$Year)
reco.t6<-reco[reco$Trial==6,]
View(reco.t6)
#subset treatments, caged and uncaged only (T6.comparison)
reco.t6.comp<-reco[reco$T6.comparison==c("High","Control")]
#subset treatments, caged and uncaged only (T6.comparison)
reco.t6.comp<-reco[reco$T6.comparison,c(=="High",=="Control")]
#subset treatments, caged and uncaged only (T6.comparison)
reco.t6.comp<-reco[reco$T6.comparison="High"&"Control",]
#subset treatments, caged and uncaged only (T6.comparison)
reco.t6.comp<-reco[reco$T6.comparison=="High"&"Control",]
reco.t6.comp<-reco.t6[c((reco.t6.comp$T6.comparison="High") |
(reco.t6.comp$T6.comparison="Control")), ]
reco.t6.comp<-reco.t6[c((reco.t6$T6.comparison="High") |
(reco.t6$T6.comparison="Control")), ]
reco.t6.comp<-reco.t6[reco.t6$T6.comparison == "High" | reco.t6$T6.comparison == "Control", ]
#subsetting data to do t6 comparison between HR caged and uncaged treatments
#subset trial
reco.t6.test<-reco(c([reco$Trial==6,],
[reco.t6$T6.comparison == "High" | reco.t6$T6.comparison == "Control", ]))
View(reco.t6.comp)
#subsetting data to do t6 comparison between HR caged and uncaged treatments
#subset trial
reco.t6<-reco[reco$Trial==6,]
View(reco.t6)
#subsetting by multiple character factors. Awesome code!
reco.t6.comp<-reco.t6[reco.t6$T6.comparison = "High" | reco.t6$T6.comparison = "Control", ]
#subsetting by multiple character factors. Awesome code!
reco.t6.comp<-reco.t6[reco.t6$T6.comparison == "High" | reco.t6$T6.comparison == "Control", ]
View(reco.t6.comp)
