##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-aov(Egg.count~Treatment*Density,data=df)#not normal
coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
df<-egg.2018.wk3.4
df<-egg.2018.t6
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-aov(Egg.count~Treatment*Density,data=df)#not normal
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
#log-transform counts for new data (2019.4.16)
df$log<-log(df$Egg.count)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-aov(log~Treatment*Density,data=df)#not normal
#log-transform counts for new data (2019.4.16)
df$log<-log(df$Egg.count+1)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-aov(log~Treatment*Density,data=df)#not normal
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-aov(Egg.counts~Treatment*Density,data=df)#not normal
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-aov(Egg.count~Treatment*Density,data=df)#not normal
coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
install.packages("HH")
library(HH)
ancova(Egg.count ~ Treatment + density, data=df)
ancova(Egg.count ~ Treatment + Density, data=df)
egg.den.bio<-read.csv("Data/jarvis.egg.count.data.with.den.max.2019.3.6.csv") #uses adjusted counts for density
ancova(Egg.count ~ Treatment + Density, data=df)
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
#c. 2018 t4 and t5 only only
egg.2018.t4.5<-egg.den.bio[(egg.den.bio$Trial>3) & (egg.den.bio$Trial<6), ]
#need to make a df that just contains the last trial (trial 6)
egg.2018.t6<-egg.den.bio[egg.den.bio$Trial==6,]
#df$Trial<-as.factor(df$Trial)
df<-egg.2018.t4.5 #2018 only
ancova(Egg.count ~ Treatment + Density, data=df)
#df$Trial<-as.factor(df$Trial)
df<-egg.2018.t4.5 #2018 only
ancova(Egg.count ~ Treatment + Density, data=df)
ancova(Egg.count ~ Treatment + Density, data=df)
ancova(Egg.count ~ Treatment + Density, data=df)
#new dataset as of 2019.4.16, summed egg counts by reef####
#did this for one month, and also only have average densities
#over the whole trial
egg.den.bio<-read.csv("Data/new.data.2019.4.16.csv") #uses adjusted counts for density
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
ancova(Egg.count ~ Treatment + Density, data=df)
#c. 2018 t4 and t5 only only
egg.2018.t4.5<-egg.den.bio[(egg.den.bio$Trial>3) & (egg.den.bio$Trial<6), ]
ancova(Egg.count ~ Treatment + Density, data=df)
library(sciplot)
library(lme4)
library(car)
library(lmerTest)
library(dplyr)
library(ggplot2)
library(MASS)
library(nlme)
library(pwr)
#new dataset as of 2019.4.16, summed egg counts by reef####
#did this for one month, and also only have average densities
#over the whole trial
egg.den.bio<-read.csv("Data/new.data.2019.4.16.csv") #uses adjusted counts for density
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
#c. 2018 t4 and t5 only only
egg.2018.t4.5<-egg.den.bio[(egg.den.bio$Trial>3) & (egg.den.bio$Trial<6), ]
#need to make a df that just contains the last trial (trial 6)
egg.2018.t6<-egg.den.bio[egg.den.bio$Trial==6,]
df<-egg.2017.t1.2.3#2017 only
library(HH)
ancova(Egg.count ~ Treatment + Density, data=df)
df<-egg.2018.t6
ancova(Egg.count ~ Treatment + Density, data=df)
egg.2017.t1.2.3<-subset(egg.2017.t1.2.3,Treatment!="Control")
egg.2017.t1.2.3$Treatment<-ordered(egg.2017.t1.2.3$Treatment,levels=c("Low","Medium","High"))
df<-egg.2017.t1.2.3#2017 only
ancova(Egg.count ~ Treatment + Density, data=df)
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
egg.2017.t1.2.3<-subset(egg.2017.t1.2.3,Treatment!="Control")
df<-egg.2017.t1.2.3#2017 only
egg.2017.t1.2.3<-subset(egg.2017.t1.2.3,Treatment!="Control")
ancova(Egg.count ~ Treatment + Density, data=egg.2017.t1.2.3)
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
egg.2017.t1.2.3<-subset(egg.2017.t1.2.3,Treatment!="Control")
egg.2017.t1.2.3<-egg.2017.t1.2.3[!(egg.2017.t1.2.3$Treatment=="Control"),]
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
egg.2017.t1.2.3<-egg.2017.t1.2.3[!(egg.2017.t1.2.3$Treatment=="Control"),]
egg.2017.t1.2.3<-subset(egg.2017.t1.2.3,Treatment!="Control")
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
egg.2017.t1.2.3<-subset(egg.2017.t1.2.3,Treatment!="Control")
View(egg.2017.t1.2.3)
df<-egg.2018.t6
ancova(Egg.count ~ Treatment + Density, data=df)
ancova(Egg.count ~ Treatment + Density, data=df, ignore.groups = FALSE, ignore.groups.name = "Control")
ancova(Egg.count ~ Treatment + Density, data=df, ignore.groups = TRUE, ignore.groups.name = "Control")
ancova(Egg.count ~ Treatment + Density, data=df, ignore.groups = TRUE, ignore.groups.name = "All")
ancova(Egg.count ~ Treatment + Density, data=df, ignore.groups = FALSE, ignore.groups.name = "All")
df<-egg.2017.t1.2.3#2017 only
ancova(Egg.count ~ Treatment + Density, data=df)
egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3,c("Low","Medium","High"),] # select only rows with any value < 8
egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatment,c("Low","Medium","High"),] # select only rows with any value < 8
egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatment("Low","Medium","High"),] # select only rows with any value < 8
egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatmentc("Low","Medium","High"),] # select only rows with any value < 8
egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatment=("Low","Medium","High"),] # select only rows with any value < 8
egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatment=c("Low","Medium","High"),] # select only rows with any value < 8
egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatment("Low","Medium","High"),] # select only rows with any value < 8
egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatment = "Low" |"Medium" |"High"),] # select only rows with any value < 8
View(egg.2017.t1.2.3)
df<-egg.2017.t1.2.3#2017 only
ancova(Egg.count ~ Treatment + Density, data=df, ignore.groups = TRUE, ignore.groups.name = "ignore.groups")
#now data without t6
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv") #uses adjusted counts for density
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
df<-egg.2017.t1.2.3#2017 only
#new dataset as of 2019.4.16, summed egg counts by reef####
#did this for one month, and also only have average densities
#over the whole trial
egg.den.bio<-read.csv("Data/new.data.2019.4.16.csv") #uses adjusted counts for density
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
#now data without t6
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv") #uses adjusted counts for density
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
#now data without t6
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv") #uses adjusted counts for density
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
#egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatment = "Low" |"Medium" |"High"),] # select only rows with any value < 8
#egg.2017.t1.2.3<-subset(egg.2017.t1.2.3,Treatment!="Control")
View(egg.2017.t1.2.3)
#now data without t6
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv") #uses adjusted counts for density
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
#egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatment = "Low" |"Medium" |"High"),] # select only rows with any value < 8
#egg.2017.t1.2.3<-subset(egg.2017.t1.2.3,Treatment!="Control")
View(egg.2017.t1.2.3)
egg.2017.t1.2.3<-na.omit(egg.2017.t1.2.3)
df<-egg.2017.t1.2.3#2017 only
ancova(Egg.count ~ Treatment + Density, data=df)
egg.2017.t1.2.3$Treatment
#now data without t6
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv") #uses adjusted counts for density
levels(egg.den.bio$Treatment)
View(egg.den.bio)
#a. combined df is for combined counts
#den.avg.egg
egg.den.bio<-na.omit(egg.den.bio)
levels(egg.den.bio$Treatment)
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
#egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatment = "Low" |"Medium" |"High"),] # select only rows with any value < 8
egg.2017.t1.2.3<-subset(egg.2017.t1.2.3,Treatment!="")
levels(egg.2017.t1.2.3$Treatment)
View(egg.2017.t1.2.3)
#now data without t6
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv", na.strings = "") #uses adjusted counts for density
levels(egg.den.bio$Treatment)
#new dataset as of 2019.4.16, summed egg counts by reef####
#did this for one month, and also only have average densities
#over the whole trial
egg.den.bio<-read.csv("Data/new.data.2019.4.16.csv", na.strings = "") #uses adjusted counts for density
#b. 2018 only
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
#egg.2017.t1.2.3 <- egg.2017.t1.2.3[egg.2017.t1.2.3$Treatment = "Low" |"Medium" |"High"),] # select only rows with any value < 8
egg.2017.t1.2.3<-subset(egg.2017.t1.2.3,Treatment!="Control")
df<-egg.2017.t1.2.3#2017 only
ancova(Egg.count ~ Treatment + Density, data=df)
#now data without t6
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv", na.strings = "") #uses adjusted counts for density
#df<-den.avg.egg
df<-egg.den.bio #combined
#a. combined df is for combined counts
#den.avg.egg
egg.den.bio<-na.omit(egg.den.bio)
#df<-den.avg.egg
df<-egg.den.bio #combined
ancova(Egg.count ~ Treatment + Density, data=df)
#just t4.5
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.t1.5.csv", na.strings = "") #uses adjusted counts for density
#a. combined df is for combined counts
#den.avg.egg
egg.den.bio<-na.omit(egg.den.bio)
#c. 2018 t4 and t5 only only
egg.2018.t4.5<-egg.den.bio[(egg.den.bio$Trial>3) & (egg.den.bio$Trial<6), ]
#df$Trial<-as.factor(df$Trial)
df<-egg.2018.t4.5 #2018 only
ancova(Egg.count ~ Treatment + Density, data=df)
##looking at means with new dataset
tapply(df$Egg.count,df$Treatment,mean)
bargraph.CI(Egg.count ~ Treatment, data=df)
bargraph.CI(x.factor = Treatment, response = Egg.count, legend=FALSE, main="Egg counts by year and treatment", xlab="Year", ylab="Eggs per reef (mean +/- se)", x.leg=9, yleg=4500, data = df)
bargraph.CI(x.factor = Treatment, response = Egg.count, legend=FALSE, main="T4.5", xlab="Treatment", ylab="Eggs per reef (mean +/- se)", x.leg=9, yleg=4500, data = df)
#df$Treatment<-factor(df$Treatment, ordered=FALSE)#unordered factor so I can interpret results
df$Treatment<-ordered(df$Treatment,levels=c("Low","Medium","High"))
bargraph.CI(x.factor = Treatment, response = Egg.count, legend=FALSE, main="T4.5", xlab="Treatment", ylab="Eggs per reef (mean +/- se)", x.leg=9, yleg=4500, data = df)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-aov(Egg.count~Treatment*Density,data=df)#not normal
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
#new dataset as of 2019.4.16, summed egg counts by reef####
#did this for one month, and also only have average densities
#over the whole trial
egg.den.bio<-read.csv("Data/new.data.2019.4.16.csv", na.strings = "") #uses adjusted counts for density
#need to make a df that just contains the last trial (trial 6)
egg.2018.t6<-egg.den.bio[egg.den.bio$Trial==6,]
df$Treatment<-ordered(df$Treatment,levels=c("Low","Medium","High","Control"))
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-aov(Egg.count~Treatment*Density,data=df)#not normal
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
df<-egg.2018.t6
df$Treatment<-ordered(df$Treatment,levels=c("Low","Medium","High","Control"))
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-aov(Egg.count~Treatment*Density,data=df)#not normal
#coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lm(Egg.count~Treatment*Density,data=df)#not normal
#coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-glm(Egg.count~Treatment*Density,family=poisson,data=df)#not normal
#coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-(Egg.count~Treatment*Density,data=df)#not normal
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-(Egg.count~Treatment*Density,data=df)#not normal
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-glm(Egg.count~Treatment*Density,data=df)#not normal
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lm(Egg.count~Treatment*Density,data=df)#not normal
#coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
Anova(mod1, type="II")
summary(mod1)
plot(mod1)#looks like equal variance though
View(df)
ancova(Egg.count ~ Treatment + Density, data=df)
df<-egg.2018.t6
ancova(Egg.count ~ Treatment + Density, data=df)
df$Treatment<-ordered(df$Treatment,levels=c("Low","Medium","High","Control"))
bargraph.CI(x.factor = Treatment, response = Egg.count, legend=FALSE, main="T4.5", xlab="Treatment", ylab="Eggs per reef (mean +/- se)", x.leg=9, yleg=4500, data = df)
bargraph.CI(x.factor = Treatment, response = Egg.count, legend=FALSE, main="T6", xlab="Treatment", ylab="Eggs per reef (mean +/- se)", x.leg=9, yleg=4500, data = df)
##looking at means with new dataset
tapply(df$Egg.count,df$Treatment,mean)
#now data with just t1-3, NEED TO DO NA.STRINGS = "" FOR ANCOVA!!
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv", na.strings = "") #uses adjusted counts for density
levels(egg.den.bio$Treatment)
View(egg.den.bio)
egg.den.bio<-na.omit(egg.den.bio)
#df<-den.avg.egg
df<-egg.den.bio #combined
ancova(Egg.count ~ Treatment + Density, data=df)
ancova(Egg.count ~ Treatment * Density, data=df)
ancova(Egg.count ~ Treatment + Density, data=df)
##looking at means with new dataset
tapply(df$Egg.count,df$Treatment,mean)
#df$Treatment<-factor(df$Treatment, ordered=FALSE)#unordered factor so I can interpret results
df$Treatment<-ordered(df$Treatment,levels=c("Low","Medium","High"))
##looking at means with new dataset
tapply(df$Egg.count,df$Treatment,mean)
bargraph.CI(x.factor = Treatment, response = Egg.count, legend=FALSE, main="T1.2.3", xlab="Treatment", ylab="Eggs per reef (mean +/- se)", x.leg=9, yleg=4500, data = df)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lm(Egg.count~Treatment*Density,data=df)#not normal
#coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lm(Egg.count~Treatment+Density,data=df)#not normal
#coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
summary(mod1)
#now data with just t1-3, NEED TO DO NA.STRINGS = "" FOR ANCOVA!!
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv", na.strings = "") #uses adjusted counts for density
#df<-den.avg.egg
df<-egg.den.bio #combined
#now data with just t1-3, NEED TO DO NA.STRINGS = "" FOR ANCOVA!!
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv", na.strings = "") #uses adjusted counts for density
levels(egg.den.bio$Treatment)
#a. combined df is for combined counts
#den.avg.egg
egg.den.bio<-na.omit(egg.den.bio)
#df<-den.avg.egg
df<-egg.den.bio #combined
#with interactive effects of covariate
ancova(Egg.count ~ Treatment * Density, data=df)
#just t4.5
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.t1.5.csv", na.strings = "") #uses adjusted counts for density
egg.den.bio<-na.omit(egg.den.bio)
egg.2018.t4.5<-egg.den.bio[(egg.den.bio$Trial>3) & (egg.den.bio$Trial<6), ]
#df$Trial<-as.factor(df$Trial)
df<-egg.2018.t4.5 #2018 only
#with interactive effects of covariate
ancova(Egg.count ~ Treatment * Density, data=df)
#now data with just t1-3, NEED TO DO NA.STRINGS = "" FOR ANCOVA!!
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv", na.strings = "") #uses adjusted counts for density
#a. combined df is for combined counts
#den.avg.egg
egg.den.bio<-na.omit(egg.den.bio)
#df<-den.avg.egg
df<-egg.den.bio #combined
#with interactive effects of covariate
ancova(Egg.count ~ Treatment * Density, data=df)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lm(Egg.count~Treatment*Density,data=df)#not normal
anova(mod1)
#just t4.5
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.t1.5.csv", na.strings = "") #uses adjusted counts for density
egg.den.bio<-na.omit(egg.den.bio)
egg.2018.t4.5<-egg.den.bio[(egg.den.bio$Trial>3) & (egg.den.bio$Trial<6), ]
#df$Trial<-as.factor(df$Trial)
df<-egg.2018.t4.5 #2018 only
ancova(Egg.count ~ Treatment + Density, data=df)
#new dataset as of 2019.4.16, summed egg counts by reef####
#did this for one month, and also only have average densities
#over the whole trial
egg.den.bio<-read.csv("Data/new.data.2019.4.16.csv", na.strings = "") #uses adjusted counts for density
#a. combined df is for combined counts
#den.avg.egg
egg.den.bio<-na.omit(egg.den.bio)
#need to make a df that just contains the last trial (trial 6)
egg.2018.t6<-egg.den.bio[egg.den.bio$Trial==6,]
df<-egg.2018.t6
#with interactive effects of covariate
ancova(Egg.count ~ Treatment * Density, data=df)
library(sciplot)
library(lme4)
library(car)
library(lmerTest)
library(dplyr)
library(ggplot2)
library(MASS)
library(nlme)
library(pwr)
library(HH)
#just t4.5
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.t1.5.csv", na.strings = "") #uses adjusted counts for density
egg.den.bio<-na.omit(egg.den.bio)
egg.2018.t4.5<-egg.den.bio[(egg.den.bio$Trial>3) & (egg.den.bio$Trial<6), ]
#df$Trial<-as.factor(df$Trial)
df<-egg.2018.t4.5 #2018 only
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lm(Egg.count~Treatment*Density,data=df)#not normal
#coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
egg.den.bio<-read.csv("Data/jarvis.egg.count.data.with.den.max.2019.3.6.csv") #uses adjusted counts for density
egg.den.bio<-na.omit(egg.den.bio)
egg.2018.t4.5<-egg.den.bio[(egg.den.bio$Trial>3) & (egg.den.bio$Trial<6), ]
#df<-den.avg.egg
df<-egg.den.bio #combined
#df$Trial<-as.factor(df$Trial)
df<-egg.2018.t4.5 #2018 only
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lmer(Egg.count~Treatment*Density*Week+(1|Treatment:Reef),data=df)#not normal
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lmer(Egg.count~Treatment*Density*Week+(1|Reef),data=df)#not normal
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lmer(Egg.count~Treatment*Density*Week,data=df)#not normal
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lmer(Egg.count~Treatment*Density*Week+(1|Treatment:Reef),data=df)#not normal
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lmer(Egg.count~Treatment*Week+(1|Treatment:Reef),data=df)#not normal
#coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lmer(Egg.count~Treatment*Week+(1|Treatment:Reef)+Density,data=df)#not normal
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lmer(Egg.count~Treatment*Week*Density+(1|Reef),data=df)#not normal
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lmer(Egg.count~Week*Density+(1|Treatment:Reef),data=df)#not normal
#coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
##########A) Unadjusted egg counts by treatment by week#############
#2017.t1.2.3 analyses
mod1<-lmer(Egg.count~Treatment*Week*Density+(1|Treatment:Reef),data=df)#not normal
#coef(summary(mod1))[,4]
hist(resid(mod1))
qqnorm(resid(mod1))
qqline(resid(mod1))
anova(mod1)
summary(mod1)
#with interactive effects of covariate
ancova(Egg.count~Treatment*Week*Density+(1|Treatment:Reef),data=df)
#with interactive effects of covariate
ancova(Egg.count~Treatment*Week*Density,data=df)
#with interactive effects of covariate
ancova(Egg.count~Treatment*Week,data=df)
#data import
#new dataset as of 2019.4.16, summed egg counts by reef####
#did this for one month, and also only have average densities
#over the whole trial
egg.den.bio<-read.csv("Data/new.data.2019.4.16.csv", na.strings = "") #uses adjusted counts for density
#now data with just t1-3, NEED TO DO NA.STRINGS = "" FOR ANCOVA!!
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.no.t6.csv", na.strings = "") #uses adjusted counts for density
egg.den.bio<-na.omit(egg.den.bio)
egg.2017.t1.2.3<-egg.den.bio[egg.den.bio$Trial<4,]
#just t4.5
egg.den.bio<-read.csv("Data/new.data.2019.4.16a.t1.5.csv", na.strings = "") #uses adjusted counts for density
egg.den.bio<-na.omit(egg.den.bio)
egg.2018.t4.5<-egg.den.bio[(egg.den.bio$Trial>3) & (egg.den.bio$Trial<6), ]
#2018.t6
egg.den.bio<-read.csv("Data/new.data.2019.4.16.csv", na.strings = "")
egg.2018.t6<-egg.den.bio[(egg.den.bio$Trial>5)]
egg.2018.t6<-egg.den.bio[(egg.den.bio$Trial>5),]
mod <- ancova(Egg.count ~ Treatment*Density, data=egg.2017.t1.2.3)
pred <- predict(mod)
View(pred)
ggplot(data = cbind(egg.2017.t1.2.3, pred),
aes(Egg.count, Density, color=Treatment)) + geom_point() +
facet_grid(. ~ Treatment) + geom_line(aes(y=Density))
ggplot(data = cbind(egg.2017.t1.2.3, pred),
aes(Density, Egg.count, color=Treatment)) + geom_point() +
facet_grid(. ~ Treatment) + geom_line(aes(y=Density))
ggplot(data = cbind(egg.2017.t1.2.3, pred),
aes(Density, Egg.count, color=Treatment)) + geom_point() +
facet_grid(. ~ Treatment) + geom_line(aes(y=Density) + stat_smooth(method="lm"))
ggplot(data = cbind(egg.2017.t1.2.3, pred),
aes(Density, Egg.count, color=Treatment)) + geom_point()  + stat_smooth(method="lm") +
facet_grid(. ~ Treatment) + geom_line(aes(y=Density))
#2018
mod <- ancova(Egg.count ~ Treatment*Density, data=egg.2018.t4.5)
pred <- predict(mod)
ggplot(data = cbind(egg.2018.t4.5, pred),
aes(Density, Egg.count, color=Treatment)) + geom_point()  + stat_smooth(method="lm") +
facet_grid(. ~ Treatment) + geom_line(aes(y=Density))
#2018.t.6
mod <- ancova(Egg.count ~ Treatment*Density, data=egg.2018.t6)
pred <- predict(mod)
ggplot(data = cbind(egg.2018.t6, pred),
aes(Density, Egg.count, color=Treatment)) + geom_point()  + stat_smooth(method="lm") +
facet_grid(. ~ Treatment) + geom_line(aes(y=Density))
